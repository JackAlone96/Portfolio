<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Memory Leak - Giovanni Giacalone</title>
<meta name="description" content="Memory Leak is a survival tower defense 3D game with roguelite elements">


  <meta name="author" content="Contact me">
  
  <meta property="article:author" content="Contact me">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Giovanni Giacalone">
<meta property="og:title" content="Memory Leak">
<meta property="og:url" content="http://localhost:4000/portfolio/MemoryLeak/">


  <meta property="og:description" content="Memory Leak is a survival tower defense 3D game with roguelite elements">



  <meta property="og:image" content="http://localhost:4000/portfolio/assets/images/MemoryLeak.png">





  <meta property="article:published_time" content="2024-03-14T18:45:40+01:00">





  

  


<link rel="canonical" href="http://localhost:4000/portfolio/MemoryLeak/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Giovanni Giacalone",
      "url": "http://localhost:4000/portfolio/"
    
  }
</script>







<!-- end _includes/seo.html -->




<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/portfolio/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/portfolio/">
          Giovanni Giacalone
          <span class="site-subtitle">Game Programmer Portfolio</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/portfolio/Contact_me/">About me</a>
            </li><li class="masthead__menu-item">
              <a href="/portfolio/Resume/">Resume</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      <h3>Role</h3>
      <p>Game Programmer</p>

      
    
      
      <h3>Main responsabilities</h3>
      <ul>
  <li>General Game and Progression System</li>
  <li>AI Programming</li>
  <li>Enemies System</li>
  <li>UI Programming</li>
  <li>Sound Programming</li>
</ul>

      
    
      
      <h3>Technologies used:</h3>
      <ul>
  <li>Blueprint</li>
  <li>Behavior Tree</li>
  <li>State Tree</li>
  <li>Blueprint Widget</li>
  <li>Sound Cue</li>
  <li>Data Table</li>
</ul>

      
    
      
      <h3>Engine: Unreal Engine 5</h3>
      

      
    
      
      <h3>Team size: 9</h3>
      <ul>
  <li>4 Game Programmers</li>
  <li>5 Game Designers</li>
</ul>

      
    
      
      <h3>Time frame: 4 months</h3>
      

      
    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Memory Leak">
    <meta itemprop="description" content="Memory Leak is a survival tower defense 3D game with roguelite elements">
    <meta itemprop="datePublished" content="2024-03-14T18:45:40+01:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Memory Leak
</h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#overview">Overview</a></li><li><a href="#what-i-have-learned">What I have learned</a></li><li><a href="#game-progression-system">Game Progression System</a></li><li><a href="#enemies">Enemies</a><ul><li><a href="#an-object-oriented-approach">An Object Oriented Approach</a></li><li><a href="#a-data-driven-approach">A Data Driven Approach</a></li><li><a href="#artificial-intelligence-implementation">Artificial Intelligence Implementation</a><ul><li><a href="#flying-pathfinding-problem">Flying Pathfinding Problem</a></li></ul></li><li><a href="#bossfight">Bossfight</a><ul><li><a href="#why-the-state-tree">Why the state tree</a></li><li><a href="#the-state-tree-implementation">The state tree implementation</a></li></ul></li></ul></li><li><a href="#user-interface">User Interface</a></li></ul>

            </nav>
          </aside>
        
        
<figure class=" ">
  
    
      <a href="/portfolio/assets/images/MemoryLeak.png" title="Main menu">
          <img src="/portfolio/assets/images/MemoryLeak.png" alt="Memory Leak Menu" />
      </a>
    
  
  
</figure>

<h2 id="overview">Overview</h2>

<p>Memory Leak is a third-person survival game with roguelite and tower defense elements  where the player controls Roberto, a robot that must survive in an procedurally generated factory by looting resources and by keeping a variety of monsters at bay with the help of its powerful turrets. These will be unlocked throughout each run and will aid Roberto in its escape in many different ways.<br />
<a href="https://github.com/Helluva-Studio/Project-Factory">Memory Leak on GitHub</a><br />
<a href="https://arakiwi.itch.io/memory-leak">Memory Leak on Itch.io</a><br /></p>

<h2 id="what-i-have-learned">What I have learned</h2>
<p>This was the first project I’ve ever worked on in <strong>Unreal Engine 5</strong> so thanks to it I was able to get accustomed with the Engine, its structure and its gameplay framework.<br />
For this reason and because of the time constraints this project was fully developed using <strong>blueprints</strong>, a tool I became really comfortable with.<br />
My main focus was the enemies and their Artificial Intelligence so I was able to experiment a lot with Unreal Engine <strong>behavior trees, state trees and AI perception</strong> component.<br />
During the development I also had the opportunity to dive into UI Programming using Unreal Engine <strong>widget blueprints</strong> and I handled the game progression system.<br /></p>

<h2 id="game-progression-system">Game Progression System</h2>
<p>Each new run is staged in a procedurally generated factory made up of hand-crafted rooms that the player needs to open to proceed in the game. I had the task to come up with a system to handle the general game progression: a simple system that keeps track of the time and manages the probability of the frenzy, an event where all the enemies alive would get stronger and chase the player even if far away from him.<br /> 
The probability is handled starting from an initial value and then incrementing each time the method fails, if it succeeds then a frenzy can start and the probability gets reset to an initial value (that also increments during the run).<br />
Also at the end of the dungeon generation the system puts 4 levers in 4 specific rooms: the southernmost one, the northernmost one and so on. Whenever a lever gets pulled a frenzy gets triggered and all enemies level up. When all the 4 levers are pulled then the teleport in the first room of the factory is activated and the player is able to reach the bossfight.</p>

<figure class=" ">
  
    
      <a href="/portfolio/assets/images/MemoryLeakLastLever.gif" title="Last lever">
          <img src="/portfolio/assets/images/MemoryLeakLastLever.gif" alt="Memory Leak Last Lever" />
      </a>
    
  
  
</figure>

<h2 id="enemies">Enemies</h2>
<p>My main task during this project was to develop the enemies and a general system that manages them. Regarding the latter I came up with a system that creates a pool of possible enemies at the start of each new survival day (8 minutes in-game), each enemy with its own probability to spawn. There are 2 enemies per room and a room gets populated only when the player opens it, whenever an enemy is killed an internal timer starts (each enemy has its own timer) and at the end of it it respawns in the room where the player is or in the adjacent ones.<br /></p>

<h3 id="an-object-oriented-approach">An Object Oriented Approach</h3>
<p>Once the design team was done ideating the enemies’ archetypes the very first thing I did was a class diagram to help me define a good object oriented structure in order to assure <strong>flexibility, maintainability, to avoid code repetition and most important to allow me to further expand and/or add new enemies or behaviors</strong>.<br /></p>

<figure class=" ">
  
    
      <a href="/portfolio/assets/images/MemoryLeak-Enemies.jpg" title="Enemies Class Diagram">
          <img src="/portfolio/assets/images/MemoryLeak-Enemies.jpg" alt="Memory Leak UML" />
      </a>
    
  
  
</figure>

<h3 id="a-data-driven-approach">A Data Driven Approach</h3>
<p>To aid the design team in the definition of the enemies’ stats I decided to adopt a <strong>data driven approach</strong>: I created a <strong>data table asset</strong> for each enemy, these were composed of 5 rows, the possible levels, and various entries, the specific enemy statistics. Whenever an enemy spawns he reads and sets all its values from his data table according to the level he is spawning.<br />
Thanks to this approach the design team was able to implement more accurate balance changes faster since they were able to see the big picture altogether.<br /></p>

<h3 id="artificial-intelligence-implementation">Artificial Intelligence Implementation</h3>
<p>Each enemy is controlled by a BasicEnemyController who handles the entering/exiting from the frenzy state and manages all the senses, in particular the <strong>sight one, hearing one, touch one and prediction one</strong>. For each sense I implemented a series of checks to make sure that the enemy is actually sensing the player and that the perception is successful, after these checks, the controller communicates with the blackboard so that this new information can be used in the decision making done by the <strong>behavior tree</strong>.<br />
The basic behavior tree has 4 main branches:</p>
<ul>
  <li><strong>Patrol</strong> (choose a random point in a given range and reach it)</li>
  <li><strong>Investigate</strong> (goes toward the source of a noise)</li>
  <li><strong>Player detected</strong>:
    <ul>
      <li>Chase player</li>
      <li>Attack player</li>
    </ul>
  </li>
  <li><strong>Turret detected</strong> (only if the player has not been detected or if it is too far away)
    <ul>
      <li>Reach turret</li>
      <li>Attack turret</li>
    </ul>
  </li>
</ul>

<p>The flow of the behavior tree is regulated by the conjunction use of <strong>decorators and services</strong>, both premade and custom made.<br />
For example the decision of shooting the player made by a ranged enemy is made only if the player is in sight (checked thanks to a decorator), if it has been inside its range long enough (checked thanks to a service) and if the tag cooldown on that task is expired (checked thanks to another decorator).<br /></p>

<h4 id="flying-pathfinding-problem">Flying Pathfinding Problem</h4>
<p>A curious problem I had to deal with while working with the Artificial Intelligence was on how to make a pathfinding for the flying enemies since the solution Unreal Engine offers does not include this feature.<br />
Since making our own 3D pathfinding algorithm was completely out of scope, the “creative” solution we came up with was to make <strong>an invisible flying floor where only the flying enemies could walk</strong>.<br /> 
This gives a good illusion of flying although there were some care had to be taken with the level design.<br />
However, this was better than the more classic solution of having the enemy walk on the ground but with its collider and mesh in the air because this method has a major flaw in my opinion: the flying enemy would have of course avoided all obstacles, also those lower than him.<br /></p>

<figure class=" ">
  
    
      <a href="/portfolio/assets/images/MemoryLeakFlyingPathfinding.gif" title="Flying Pathfinding">
          <img src="/portfolio/assets/images/MemoryLeakFlyingPathfinding.gif" alt="Flying Pathfinding" />
      </a>
    
  
  
</figure>

<h3 id="bossfight">Bossfight</h3>
<h4 id="why-the-state-tree">Why the state tree</h4>
<p>Designing and developing the AI for the bossfight was the thing I enjoyed the most during this project. For it I decided to use the <strong>state trees</strong> since already during the development of the normal enemies’ AI I realized that the behavior trees were not the best choice for me for two main reasons:</p>
<ul>
  <li>while designing the overall architecture I always had a state-like structure in mind and make that work in behavior trees resulted in trees a little too cluttered;</li>
  <li>managing transitions from a branch to another one wasn’t that much clean.</li>
</ul>

<p>Given these reasons I understood that behavior trees were not the correct choice and that I was using them the wrong way, like a state machine.<br />
Switching to state trees made the design and implementation of the bossfight AI much easier and readable thanks also to the possibility of managing the various transitions on a case-by-case basis.<br /></p>

<h4 id="the-state-tree-implementation">The state tree implementation</h4>
<p>The boss’s state trees has a static hierarchy of priorities, from top to bottom:</p>
<ol>
  <li>He will try to <strong>build a turret</strong> of its own (only if there are construction points available and if he has not yet reached its build limit);</li>
  <li>He will try to <strong>attack the player</strong> (only if it is inside a given range)</li>
  <li>He will try to <strong>attack one of the turrets built by the player</strong> (if there are any, if there are not then he will chase the player down regardless of its distance)</li>
</ol>

<p>The boss also holds a special state called “Desperation Move” triggered only when the damage received within a specific time frame exceeds a threshold causing him to release it in the form of an explosion that deals damage to everything in its path.<br /></p>

<figure class=" ">
  
    
      <a href="/portfolio/assets/images/StateTree.png" title="Bossfight State Tree">
          <img src="/portfolio/assets/images/StateTree.png" alt="Memory Leak State Tree" />
      </a>
    
  
  
</figure>

<figure class=" ">
  
    
      <a href="/portfolio/assets/images/MemoryLeakBossfight.gif" title="Bossfight">
          <img src="/portfolio/assets/images/MemoryLeakBossfight.gif" alt="Memory Leak Bossfight" />
      </a>
    
  
  
</figure>

<p>A possible improvement to the boss’s AI would be changing its static hierarchy of priorities into a dynamic one, a <strong>Utility System</strong>, where according to the specific moment a score is calculated for each possible behavior (or state) and the higher one gets chosen and performed. In my opinion this would make for a better AI and overall a more challenging bossfight experience.<br /></p>

<h2 id="user-interface">User Interface</h2>
<p>Another aspect of the development that I really enjoyed was programming the various <strong>menus and submenus of the game and their opening/closing animations</strong>.<br />
In particular I took care of:</p>
<ul>
  <li>the main menu</li>
  <li>the win/game over screen</li>
  <li>the turret selection screen (the screen before the start of a new game that let the player select which turret he would like to start the game with)</li>
  <li>the dialogue screen (implemented at the beginning and end of the game to show the plot)</li>
</ul>

<p>For the latter I developed a simple “tool” meaning that the designers could input inside a data table all the information about the text they wanted to show (like the actual text, fontsize, color and so on) and the widget would then adapt to the design team’s liking.<br /></p>

<figure class="half ">
  
    
      <a href="/portfolio/assets/images/MemoryLeakMenuGif.gif" title="Memory Leak Main Screen">
          <img src="/portfolio/assets/images/MemoryLeakMenuGif.gif" alt="Memory Leak UI" />
      </a>
    
  
    
      <a href="/portfolio/assets/images/MemoryLeakLore.gif" title="Memory Leak Lore Screen">
          <img src="/portfolio/assets/images/MemoryLeakLore.gif" alt="Memory Leak UI" />
      </a>
    
  
  
</figure>


        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2024-03-14T18:45:40+01:00">March 14, 2024</time></p>


      </footer>

      

      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Contact me:</strong></li>
    

    
      
        
          <li><a href="https://www.linkedin.com/in/giacalone-giovanni/" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn</a></li>
        
      
        
      
        
          <li><a href="https://github.com/JackAlone96" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
          <li><a href="mailto:giacalone.giovanni96@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
        
      
    

    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Giovanni Giacalone. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/portfolio/assets/js/main.min.js"></script>










  </body>
</html>
